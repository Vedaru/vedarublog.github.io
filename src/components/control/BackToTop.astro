---
import { Icon } from "astro-icon/components";
---

<!-- There can't be a filter on parent element, or it will break `fixed` -->
<div class="back-to-top-wrapper block">
    <div id="back-to-top-btn" class="back-to-top-btn hide flex items-center rounded-2xl overflow-hidden transition"
         onclick="backToTop()">
        <button aria-label="Back to Top" class="btn-card h-[3.75rem] w-[3.75rem]">
            <Icon name="material-symbols:keyboard-arrow-up-rounded" class="mx-auto"></Icon>
        </button>
    </div>
</div>

<style lang="stylus">
  .back-to-top-wrapper
    /* Keep the wrapper fixed to the viewport so transforms on ancestors do not affect it */
    position: fixed
    right: 2rem
    bottom: 2rem
    width: auto
    height: auto
    pointer-events: none
    z-index: 60

  .back-to-top-btn
    color: var(--primary)
    font-size: 2.25rem
    font-weight: bold
    border: none
    position: relative
    opacity: 1
    cursor: pointer
    transform: translateY(0)
    pointer-events: auto
    transition: box-shadow 1s ease-in-out, transform 0.25s ease, opacity 0.25s ease

    i
      font-size: 1.75rem

    &.hide
      transform: translateY(1rem) scale(0.95)
      opacity: 0
      pointer-events: none

    &:active
      transform: translateY(0.2rem) scale(0.95)

  @media (max-width: 1560px)
    .back-to-top-btn
      box-shadow:
              0 0 0 1px var(--btn-regular-bg) ,
              0 0 1em var(--btn-regular-bg) ;

  // 手机端隐藏返回顶部按钮
  @media (max-width: 768px)
    .back-to-top-wrapper
      display: none

</style>

<script is:raw is:inline>
    function backToTop() {
        // 直接使用原生滚动，避免OverlayScrollbars冲突
        window.scroll({top: 0, behavior: 'smooth'});
    }
</script>
